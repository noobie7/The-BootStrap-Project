<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />

      {% block title %}
      {% endblock title %}

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha2/css/bootstrap.min.css" integrity="sha384-DhY6onE6f3zzKbjUPRc2hOzGAdEf4/Dz+WJwBvEYL/lkkIsI3ihufq9hk9K4lVoK" crossorigin="anonymous">
    <!-- Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Raleway:300,400,500,700&display=swap"
      rel="stylesheet"
    />
  
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.css"
      rel="stylesheet"
    />
    <link href="https://cdn.jsdelvr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet" type="text/css">
    <script src="https://cdn.jsdelvr.net/npm/simple-datatables@latest" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>   

    <style>
      :root {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
          --background :  linear-gradient(45deg,  #fc1255,#b537ed);
          --element : #FF9671;
          --glass : linear-gradient(103.71deg, rgba(255, 255, 255, 0.1) 0.23%, rgba(255, 255, 255, 0.1) 0.23%);
          --details : black ;
          --text_on_glass : white;
          --_blur : blur(25px);
          --text_not_on_glass : white;
      }
      .theme-1{
        --background :  linear-gradient(45deg,  #b537ed, #0057b8);
        --element : #FF9671;
        --details : white ;
        /* --text_on_glass : rgb(97, 99, 240); */
        --text_not_on_glass : white;
      }
      .theme-2{
        --background : linear-gradient(45deg, #323232, #323232); ; 
        --element : #323232;
        --text_on_glass : rgb(167, 161, 161);
        --glass : linear-gradient(103.71deg,#212121, #212121 );
        --text_not_on_glass : white;
        --details : white;
        --_blur: blur(100px);
      }
      #glass{
        background: var(--glass);
        backdrop-filter: var(--_blur);
        z-index: 1;
        border-radius: 5%;
        border-width: thick;
        color : var(--text_on_glass);
        margin : 20px;
        margin-left: auto;
        margin-right: auto;
        display: block;
      } 
      
      body {
        background-image: var(--background);
        background-repeat: no-repeat;
        background-attachment: fixed; 
        
      }

      .navbar {
          width: 250px;
          height: 100vh;
          position: fixed;
          margin-left: -300px;
          transition: 0.2s;
          z-index: 1;
          background: var(--glass);
          backdrop-filter: blur(100px);
          box-shadow: 0;      
      }
      .nav-link {
          font-size: 1.25em;
          color: var(--text_on_glass);
      }
      .nav-link:hover,
      .nav-link:focus {
        color: var(--text_on_glass);
      }
      .my-container {
          transition: 0.2s;
      }
      .active-nav {
          margin-left: 0;
      }
      .active-container {
          margin-left: 250px;
          width: calc(100vw - 250px);
      }
      .btn:focus{
        box-shadow: none;
      }
      

        
    </style>
  </head>
    <!-- Sidebar -->
    <nav class="navbar navbar-expand d-flex flex-column align-item-center" id="sidebar">
      <a href="{{url_for('home')}}" class="navbar-brand" style="font-family: 'Montserrat'; font-size: 35px; color : var(--text_on_glass); overflow: hidden">TRIBE</a>
      {% if current_user.is_authenticated %}
        <ul class = "navbar-nav d-flex flex-column mt-5 w-100 align-items-center justify-content-center">
          <li class="nav-item m-1" style = "font-family: 'Raleway'; font-weight: 200; font-size: 25px; overflow: hidden;" >
            <a class="nav-link  " href="/one">
              <i class="fas fa-code">
                One
            </i>
            </a>
          </li>
          <li class="nav-item  m-1" style = "font-family: 'Raleway'; font-weight: 200; font-size: 25px; overflow: hidden;" >
            <a class="nav-link  " href="{{url_for('two')}}">
              <i class="fas fa-code-branch">
                Two
              </i>
            </a>
          </li>
          <li class="nav-item m-1" style = "font-family: 'Raleway'; font-weight: 200; font-size: 25px; overflow: hidden;" >
            <a class="nav-link  " href="{{url_for('three')}}">
              <i class="fas fa-qrcode">
                Three
              </i>
            </a>
          </li>
          <li class="nav-item m-1" style = "font-family: 'Raleway'; font-weight: 200; font-size: 25px; overflow: hidden;" >
            <a class="nav-link  " href="">
              <i class="fas fa-file-code">
                Four
              </i>
            </a>
          </li>
          <li class="nav-item m-1" style = "font-family: 'Raleway'; font-weight: 200; font-size: 25px; overflow: hidden;" >
            <a class="nav-link  " href="">
              <i class="far fa-file-code">
                Five
              </i>
            </a>
          </li>
          <li class="nav-item m-1" style = "font-family: 'Raleway'; font-weight: 200; font-size: 25px; overflow: hidden;" >
            <a class="nav-link  " href="">
              <i class="fas fa-terminal">
                Six
              </i>
            </a>
          </li>
        </ul>
        <div class="btn-group btn-group-vertical shadow-0"  style = " font-family: 'Montserrat'; padding-top: 5vh;; overflow: hidden;" role="group">
          <button type="button" class="btn border-bottom rounded-0" data-mdb-ripple-color="dark">
            <a class="nav-link " href = "{{url_for('new_post')}}">
              Create 
            </a>
          </button>
          <button type="button" class="btn  rounded-0" data-mdb-ripple-color="dark">
            <a class="nav-link " href = "{{url_for('logout')}}">
              Logout
            </a>
          </button>
        </div>
      {% else %}
      <div class="btn-group btn-group-vertical shadow-0"  style = " font-family: 'Montserrat'; padding-top: calc((100vh - 185px) / 2)  ; overflow: hidden;;" role="group">
          <button type="button" class="btn border-bottom rounded-0" data-mdb-ripple-color="dark">
            <a class="nav-link " href = "{{url_for('login')}}">
              Login
            </a>
          </button>
          <button type="button" class="btn  rounded-0" data-mdb-ripple-color="dark">
            <a class="nav-link  " href = "{{url_for('register')}}">
              Register
            </a>
          </button>
      </div>
      {% endif %}   
    </nav>
    <!-- Sidebar ENDS -->


    <section >
      <div id = 'my_container' >
        

          
          <div class="px-3 mx-3 justify-content-center align-items-center">
            <section class="row justify-content-center align-items-center" style="height : 70px; font-family: 'Montserrat'; width: 100%; z-index: 1; " id = "nav-button">
              <button class="btn shadow-0 ripple-surface-white text-white" id = 'menu_button' style="height: 70px; font-size: 30px;"><i class="fas fa-infinity"></i>Tribe</button>
            </section>
            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                {% for category, message in messages %}
                  <div class="alert alert-{{ category }}">
                    {{ message }}
                  </div>
                {% endfor %}
              {% endif %}
            {% endwith %}
            {% block content %} 

            {% endblock content %}
          </div>
      </div>
    </section>
    




    <!-- MDB -->
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.js"
    ></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha2/js/bootstrap.min.js" integrity="sha384-5h4UG+6GOuV9qXh6HqOLwZMY4mnLPraeTrjT5v07o347pj6IkfuoASuGBhfDsp3d" crossorigin="anonymous"></script>
    


    <script>
      var menu_button = document.querySelector('#menu_button')
      var sidebar = document.querySelector('#sidebar')
      var container = document.querySelector('#my_container')
      menu_button.addEventListener( 'click', () => {
        sidebar.classList.toggle('active-nav')
        container.classList.toggle('active-container')
      })
    </script>
    {% block script %}
    {% endblock script %}
  </body>
</html>

<script>
window.onload = function() {
  // Try to read from local storage, otherwise set to default
  
  let currentTheme = localStorage.getItem("mytheme") || "default";

  const themeSelector = document.getElementById("theme-selector");

  // Set the theme that we read from local storage
  setTheme("default", currentTheme);
  themeSelector.value = currentTheme;

  // Add change event listener
  themeSelector.addEventListener("change", function(e) {
    // Get the user's choice from the event object `e`.
    const newTheme = e.currentTarget.value;

    // Set the theme
    setTheme(currentTheme, newTheme);
  });

  function setTheme(oldTheme, newTheme) {
    const body = document.getElementsByTagName("body")[0];

    // Remove old theme scope from body's class list
    body.classList.remove(oldTheme);

    // Add new theme scope to body's class list
    body.classList.add(newTheme);

    // Set it as current theme
    currentTheme = newTheme;

    // Store the new theme in local storage
    localStorage.setItem("mytheme", newTheme);
  }
};
</script>
<script>
  var menu_button = document.querySelector('#menu_button')
  var sidebar = document.querySelector('#sidebar')
  var container = document.querySelector('#my_container')

  // Keep track of clicked keys
  var isKeyPressed = {
    a: false, 
    p: false
  };

  document.onkeydown = (keyDownEvent) => {
 

   
    isKeyPressed[keyDownEvent.key] = true;

    if (isKeyPressed["a"] && isKeyPressed["p"]) {

      sidebar.classList.toggle('active-nav')
      container.classList.toggle('active-container')
     
    }
  };
  document.onkeyup = (keyUpEvent) => {
    
    keyUpEvent.preventDefault();
    isKeyPressed[keyDownEvent.key] = false;

  };

  
</script>